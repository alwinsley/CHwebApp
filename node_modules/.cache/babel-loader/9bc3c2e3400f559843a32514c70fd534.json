{"ast":null,"code":"import _classCallCheck from \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/src/app/main/pages/songs/list/SongTable.js\";\nimport _ from '@lodash';\nimport { FuseScrollbars } from '@fuse';\nimport React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { withRouter } from 'react-router-dom';\nimport SongTableHead from './SongTableHead';\nimport * as Actions from '../store/actions';\nimport connect from 'react-redux/es/connect/connect';\nimport { Table, TableBody, TableCell, TablePagination, TableRow, Button } from '@material-ui/core';\nimport * as jwt_decode from \"jwt-decode\";\nimport history from 'history.js';\nvar song = [];\nvar limit = 10; //----------get user data----------\n\nvar token = localStorage.getItem('token');\nvar decoded = []; //----------Api config ---------\n\nvar api_host = \"http://localhost:8080\";\nvar headers = new Headers();\nheaders.append('Access-Control-Allow-Origin', 'http://localhost:8080');\nheaders.append('Access-Control-Allow-Credentials', 'true');\nheaders.append('Content-Type', 'application/json');\nheaders.append('authorization', 'Bearer ' + token);\n\nvar ProductsTable =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ProductsTable, _Component);\n\n  function ProductsTable() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ProductsTable);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ProductsTable)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      order: 'asc',\n      orderBy: null,\n      selected: [],\n      data: _this.props.products,\n      page: 0,\n      rowsPerPage: 10\n    };\n\n    _this.getFilteredArray = function (data, searchText) {\n      if (searchText.length === 0) {\n        return data;\n      }\n\n      return _.filter(data, function (item) {\n        return item.name.toLowerCase().includes(searchText.toLowerCase());\n      });\n    };\n\n    _this.handleRequestSort = function (event, property) {\n      var orderBy = property;\n      var order = 'desc';\n\n      if (_this.state.orderBy === property && _this.state.order === 'desc') {\n        order = 'asc';\n      }\n\n      _this.setState({\n        order: order,\n        orderBy: orderBy\n      });\n    };\n\n    _this.handleSelectAllClick = function (event) {\n      if (event.target.checked) {\n        _this.setState(function (state) {\n          return {\n            selected: _this.state.data.map(function (n) {\n              return n.id;\n            })\n          };\n        });\n\n        return;\n      }\n\n      _this.setState({\n        selected: []\n      });\n    };\n\n    _this.handleClick = function (event, id) {\n      _this.props.history.push('/songs/details/' + id);\n    };\n\n    _this.handleCheck = function (event, id) {\n      var selected = _this.state.selected;\n      var selectedIndex = selected.indexOf(id);\n      var newSelected = [];\n\n      if (selectedIndex === -1) {\n        newSelected = newSelected.concat(selected, id);\n      } else if (selectedIndex === 0) {\n        newSelected = newSelected.concat(selected.slice(1));\n      } else if (selectedIndex === selected.length - 1) {\n        newSelected = newSelected.concat(selected.slice(0, -1));\n      } else if (selectedIndex > 0) {\n        newSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\n      }\n\n      _this.setState({\n        selected: newSelected\n      });\n    };\n\n    _this.handleChangePage = function (event, page) {\n      _this.setState({\n        page: page\n      });\n    };\n\n    _this.handleChangeRowsPerPage = function (event) {\n      _this.setState({\n        rowsPerPage: event.target.value\n      });\n    };\n\n    _this.isSelected = function (id) {\n      return _this.state.selected.indexOf(id) !== -1;\n    };\n\n    return _this;\n  }\n\n  _createClass(ProductsTable, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      if (token != null && token != \"\") {\n        decoded = jwt_decode(token);\n        fetch(api_host + '/user/getById/' + decoded.user.id, {\n          method: 'GET',\n          headers: headers\n        }).then(function (response) {\n          response.json().then(function (data) {\n            console.log(data);\n\n            if (data.length != 0) {\n              limit = \"unlimit\";\n            } else {\n              limit = 10;\n            }\n\n            fetch(api_host + '/song/' + limit + '/getByTeam/' + data[0].team_id, {\n              method: 'GET',\n              headers: headers\n            }).then(function (response) {\n              response.json().then(function (data) {\n                console.log(data);\n                song = data;\n\n                _this2.setState({\n                  data: song\n                });\n\n                console.log(\"state:\", _this2.state.data);\n              });\n            });\n          });\n        });\n      } else {\n        history.push('/');\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (!_.isEqual(this.props.products, prevProps.products) || !_.isEqual(this.props.searchText, prevProps.searchText)) {\n        var data = this.getFilteredArray(song, this.props.searchText);\n        this.setState({\n          data: data\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$state = this.state,\n          order = _this$state.order,\n          orderBy = _this$state.orderBy,\n          selected = _this$state.selected,\n          rowsPerPage = _this$state.rowsPerPage,\n          page = _this$state.page,\n          data = _this$state.data;\n      return React.createElement(\"div\", {\n        className: \"w-full flex flex-col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      }, React.createElement(FuseScrollbars, {\n        className: \"flex-grow overflow-x-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155\n        },\n        __self: this\n      }, React.createElement(Table, {\n        className: \"min-w-xl\",\n        \"aria-labelledby\": \"tableTitle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 156\n        },\n        __self: this\n      }, React.createElement(SongTableHead, {\n        numSelected: selected.length,\n        order: order,\n        orderBy: orderBy,\n        onSelectAllClick: this.handleSelectAllClick,\n        onRequestSort: this.handleRequestSort,\n        rowCount: data.length,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 157\n        },\n        __self: this\n      }), React.createElement(TableBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      }, _.orderBy(data, [function (o) {\n        switch (orderBy) {\n          case 'categories':\n            {\n              return o.categories[0];\n            }\n\n          default:\n            {\n              return o[orderBy];\n            }\n        }\n      }], [order]).slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(function (n) {\n        var isSelected = _this3.isSelected(n.id);\n\n        return React.createElement(TableRow, {\n          className: \"h-64 cursor-pointer\",\n          hover: true,\n          role: \"checkbox\",\n          \"aria-checked\": isSelected,\n          tabIndex: -1,\n          key: n.id,\n          selected: isSelected,\n          onClick: function onClick(e) {\n            return _this3.handleClick(e, n.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 197\n          },\n          __self: this\n        }, n.name), React.createElement(TableCell, {\n          className: \"truncate\",\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 201\n          },\n          __self: this\n        }, n.artist), React.createElement(TableCell, {\n          className: \"truncate\",\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 205\n          },\n          __self: this\n        }, React.createElement(Button, {\n          variant: \"contained\",\n          color: \"secondary\",\n          \"aria-label\": \"Follow\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206\n          },\n          __self: this\n        }, \"Info\")));\n      })))), React.createElement(TablePagination, {\n        component: \"div\",\n        count: data.length,\n        rowsPerPage: rowsPerPage,\n        page: page,\n        backIconButtonProps: {\n          'aria-label': 'Previous Page'\n        },\n        nextIconButtonProps: {\n          'aria-label': 'Next Page'\n        },\n        onChangePage: this.handleChangePage,\n        onChangeRowsPerPage: this.handleChangeRowsPerPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return ProductsTable;\n}(Component);\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    getProducts: Actions.getProducts\n  }, dispatch);\n}\n\nfunction mapStateToProps(_ref) {\n  var eCommerceApp = _ref.eCommerceApp;\n  return {\n    products: eCommerceApp.products.data,\n    searchText: eCommerceApp.products.searchText\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(ProductsTable));","map":{"version":3,"sources":["/Users/ALJohnny/Desktop/Git/ReactCHLayout/src/app/main/pages/songs/list/SongTable.js"],"names":["_","FuseScrollbars","React","Component","bindActionCreators","withRouter","SongTableHead","Actions","connect","Table","TableBody","TableCell","TablePagination","TableRow","Button","jwt_decode","history","song","limit","token","localStorage","getItem","decoded","api_host","headers","Headers","append","ProductsTable","state","order","orderBy","selected","data","props","products","page","rowsPerPage","getFilteredArray","searchText","length","filter","item","name","toLowerCase","includes","handleRequestSort","event","property","setState","handleSelectAllClick","target","checked","map","n","id","handleClick","push","handleCheck","selectedIndex","indexOf","newSelected","concat","slice","handleChangePage","handleChangeRowsPerPage","value","isSelected","fetch","user","method","then","response","json","console","log","team_id","prevProps","prevState","isEqual","o","categories","e","artist","mapDispatchToProps","dispatch","getProducts","mapStateToProps","eCommerceApp"],"mappings":"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","sourcesContent":["import _ from '@lodash';\nimport { FuseScrollbars } from '@fuse';\nimport React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { withRouter } from 'react-router-dom';\nimport SongTableHead from './SongTableHead';\nimport * as Actions from '../store/actions';\nimport connect from 'react-redux/es/connect/connect';\nimport { Table, TableBody, TableCell, TablePagination, TableRow, Button } from '@material-ui/core';\nimport * as jwt_decode from \"jwt-decode\";\nimport history from 'history.js';\n\nlet song = [];\nlet limit = 10;\n\n\n//----------get user data----------\nvar token = localStorage.getItem('token');\nvar decoded = [];\n\n//----------Api config ---------\nconst api_host = \"http://localhost:8080\";\n\nlet headers = new Headers();\n\nheaders.append('Access-Control-Allow-Origin', 'http://localhost:8080');\nheaders.append('Access-Control-Allow-Credentials', 'true');\nheaders.append('Content-Type', 'application/json');\nheaders.append('authorization', 'Bearer ' + token);\n\n\nclass ProductsTable extends Component {\n  state = {\n    order: 'asc',\n    orderBy: null,\n    selected: [],\n    data: this.props.products,\n    page: 0,\n    rowsPerPage: 10\n  };  \n\n  componentDidMount() {\n    if(token != null && token != \"\"){\n      decoded = jwt_decode(token);\n\n      fetch(api_host + '/user/getById/' + decoded.user.id, {\n        method: 'GET',\n        headers: headers,\n      })\n      .then(response => {\n        response.json().then(data => {\n          console.log(data); \n          if(data.length != 0){\n            limit = \"unlimit\";\n          }else{\n            limit = 10;\n          }\n      \n          fetch(api_host + '/song/' + limit + '/getByTeam/' + data[0].team_id, {\n            method: 'GET',\n            headers: headers,\n          })\n          .then(response => {\n            response.json().then(data => {\n              console.log(data);\n              song = data;\n              this.setState({ data: song });\n              console.log(\"state:\", this.state.data)\n            });\n          });\n        });\n      });\n    }else{\n      history.push('/');\n    }    \n  }\n\n  componentDidUpdate(prevProps, prevState) {    \n    if (\n      !_.isEqual(this.props.products, prevProps.products) ||\n      !_.isEqual(this.props.searchText, prevProps.searchText)\n    ) {\n      const data = this.getFilteredArray(song, this.props.searchText);\n      this.setState({ data });\n    }\n  }\n\n  getFilteredArray = (data, searchText) => { \n    if (searchText.length === 0) {\n      return data;\n    }\n    return _.filter(data, item => item.name.toLowerCase().includes(searchText.toLowerCase()));\n  };\n\n  handleRequestSort = (event, property) => {\n    const orderBy = property;\n    let order = 'desc';\n\n    if (this.state.orderBy === property && this.state.order === 'desc') {\n      order = 'asc';\n    }\n\n    this.setState({\n      order,\n      orderBy\n    });\n  };\n\n  handleSelectAllClick = event => {\n    if (event.target.checked) {\n      this.setState(state => ({ selected: this.state.data.map(n => n.id) }));\n      return;\n    }\n    this.setState({ selected: [] });\n  };\n\n  handleClick = (event, id) => {\n    this.props.history.push('/songs/details/' + id);\n  };\n\n  handleCheck = (event, id) => {\n    const { selected } = this.state;\n    const selectedIndex = selected.indexOf(id);\n    let newSelected = [];\n\n    if (selectedIndex === -1) {\n      newSelected = newSelected.concat(selected, id);\n    } else if (selectedIndex === 0) {\n      newSelected = newSelected.concat(selected.slice(1));\n    } else if (selectedIndex === selected.length - 1) {\n      newSelected = newSelected.concat(selected.slice(0, -1));\n    } else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\n    }\n\n    this.setState({ selected: newSelected });\n  };\n\n  handleChangePage = (event, page) => {\n    this.setState({ page });\n  };\n\n  handleChangeRowsPerPage = event => {\n    this.setState({ rowsPerPage: event.target.value });\n  };\n\n  isSelected = id => this.state.selected.indexOf(id) !== -1;\n\n  render() {\n    \n    const { order, orderBy, selected, rowsPerPage, page, data } = this.state;\n\n    return (\n      <div className=\"w-full flex flex-col\">\n        <FuseScrollbars className=\"flex-grow overflow-x-auto\">\n          <Table className=\"min-w-xl\" aria-labelledby=\"tableTitle\">\n            <SongTableHead\n              numSelected={selected.length}\n              order={order}\n              orderBy={orderBy}\n              onSelectAllClick={this.handleSelectAllClick}\n              onRequestSort={this.handleRequestSort}\n              rowCount={data.length}\n            />\n\n            <TableBody>\n              {_.orderBy(\n                data,\n                [\n                  o => {\n                    switch (orderBy) {\n                      case 'categories': {\n                        return o.categories[0];\n                      }\n                      default: {\n                        return o[orderBy];\n                      }\n                    }\n                  }\n                ],\n                [order]\n              )\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                .map(n => {\n                  const isSelected = this.isSelected(n.id);\n                  return (\n                    <TableRow\n                      className=\"h-64 cursor-pointer\"\n                      hover\n                      role=\"checkbox\"\n                      aria-checked={isSelected}\n                      tabIndex={-1}\n                      key={n.id}\n                      selected={isSelected}\n                      onClick={(e)=>this.handleClick(e, n.id)}\n                    >\n                      <TableCell component=\"th\" scope=\"row\">\n                        {n.name}\n                      </TableCell>\n\n                      <TableCell className=\"truncate\" component=\"th\" scope=\"row\">\n                        {n.artist}\n                      </TableCell>\n\n                      <TableCell className=\"truncate\" component=\"th\" scope=\"row\">\n                        <Button variant=\"contained\" color=\"secondary\" aria-label=\"Follow\">\n                          Info\n                        </Button>\n                      </TableCell>\n                    </TableRow>\n                  );\n                })}\n            </TableBody>\n          </Table>\n        </FuseScrollbars>\n\n        <TablePagination\n          component=\"div\"\n          count={data.length}\n          rowsPerPage={rowsPerPage}\n          page={page}\n          backIconButtonProps={{\n            'aria-label': 'Previous Page'\n          }}\n          nextIconButtonProps={{\n            'aria-label': 'Next Page'\n          }}\n          onChangePage={this.handleChangePage}\n          onChangeRowsPerPage={this.handleChangeRowsPerPage}\n        />\n      </div>\n    );\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n    {\n      getProducts: Actions.getProducts\n    },\n    dispatch\n  );\n}\n\nfunction mapStateToProps({ eCommerceApp }) {\n  return {\n    products: eCommerceApp.products.data,\n    searchText: eCommerceApp.products.searchText\n  };\n}\n\nexport default withRouter(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(ProductsTable)\n);\n"]},"metadata":{},"sourceType":"module"}