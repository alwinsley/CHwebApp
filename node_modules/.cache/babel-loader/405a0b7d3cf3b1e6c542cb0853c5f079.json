{"ast":null,"code":"import _classCallCheck from \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/src/app/main/pages/songs/mediaList/SongHeader.js\";\nimport React, { Component } from 'react';\nimport { FuseAnimate } from '@fuse';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as Actions from '../store/actions';\nimport { withRouter } from 'react-router-dom';\nimport { Paper, Input, Icon, Typography, MuiThemeProvider, Button } from '@material-ui/core';\nimport superagent from 'superagent';\nimport { SongMediaList } from './SongList';\nimport { FileInput, SVGIcon } from 'react-md';\nimport history from 'history.js';\nimport * as jwt_decode from \"jwt-decode\"; //----------get user data----------\n\nvar token = localStorage.getItem('token');\nvar decoded = []; //----------Api config ---------\n\nvar api_host = \"http://localhost:8080\";\nvar headers = new Headers();\nheaders.append('Access-Control-Allow-Origin', 'http://localhost:8080');\nheaders.append('Access-Control-Allow-Credentials', 'true');\nheaders.append('Content-Type', 'application/json');\nheaders.append('authorization', 'Bearer ' + token);\n\nvar SongHeader =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SongHeader, _Component);\n\n  function SongHeader() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SongHeader);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SongHeader)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      selectedFile: null\n    };\n\n    _this.uploadMedia = function (e) {\n      console.log(e.target);\n    };\n\n    _this.fileSelectHandler = function (event) {\n      // this.setState({ selectedFile: event.target.files[0] });\n      var selectedFile = event.target.files[0];\n      var path = 'public/uploads/media/' + selectedFile.name;\n      var sid = _this.props.match.params.sid;\n      var data = {\n        'file': selectedFile,\n        'name': selectedFile.name,\n        'path': path,\n        'sid': sid\n      };\n      var uploadRequest = superagent.post(api_host + '/media').set('authorization', 'Bearer ' + token).field(data);\n      uploadRequest.attach('image', selectedFile);\n      uploadRequest.end(function (err, res) {\n        if (err) {\n          alert(res.body.message);\n          return;\n        }\n\n        console.log(res);\n        window.location.reload(); // this.props.readMedia(sid);\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(SongHeader, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        className: \"flex flex-1 w-full items-center justify-between\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"flex items-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, React.createElement(FuseAnimate, {\n        animation: \"transition.slideLeftIn\",\n        delay: 300,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        className: \"hidden sm:flex\",\n        variant: \"h6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, \"LIST OF SONG MEDIA \"))), React.createElement(\"div\", {\n        className: \"flex flex-1 items-center justify-center px-12\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      }, React.createElement(MuiThemeProvider, {\n        theme: this.props.mainTheme,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, React.createElement(FuseAnimate, {\n        animation: \"transition.slideDownIn\",\n        delay: 300,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, React.createElement(Paper, {\n        className: \"flex items-center w-full max-w-512 px-8 py-4 rounded-8\",\n        elevation: 1,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      }, React.createElement(Icon, {\n        className: \"mr-8\",\n        color: \"action\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 85\n        },\n        __self: this\n      }, \"search\"), React.createElement(Input, {\n        placeholder: \"Search\",\n        className: \"flex flex-1\",\n        disableUnderline: true,\n        fullWidth: true,\n        value: this.props.searchText,\n        inputProps: {\n          'aria-label': 'Search'\n        },\n        onChange: this.props.setSearchText,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }))))), React.createElement(\"input\", {\n        accept: \"image/*\",\n        style: {\n          display: 'none'\n        },\n        id: \"raised-button-file\",\n        multiple: true,\n        type: \"file\",\n        onChange: this.fileSelectHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }), React.createElement(\"label\", {\n        htmlFor: \"raised-button-file\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"contained\",\n        component: \"span\",\n        onClick: this.uploadMedia,\n        color: \"secondary\",\n        \"aria-label\": \"Follow\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"Upload New Media\")));\n    }\n  }]);\n\n  return SongHeader;\n}(Component);\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    setSearchText: Actions.setProductsSearchText\n  }, dispatch);\n}\n\nfunction mapStateToProps(_ref) {\n  var eCommerceApp = _ref.eCommerceApp,\n      fuse = _ref.fuse,\n      ownProps = _ref.ownProps;\n  return {\n    searchText: eCommerceApp.products.searchText,\n    mainTheme: fuse.settings.mainTheme\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(SongHeader));","map":{"version":3,"sources":["/Users/ALJohnny/Desktop/Git/ReactCHLayout/src/app/main/pages/songs/mediaList/SongHeader.js"],"names":["React","Component","FuseAnimate","connect","bindActionCreators","Actions","withRouter","Paper","Input","Icon","Typography","MuiThemeProvider","Button","superagent","SongMediaList","FileInput","SVGIcon","history","jwt_decode","token","localStorage","getItem","decoded","api_host","headers","Headers","append","SongHeader","state","selectedFile","uploadMedia","e","console","log","target","fileSelectHandler","event","files","path","name","sid","props","match","params","data","uploadRequest","post","set","field","attach","end","err","res","alert","body","message","window","location","reload","mainTheme","searchText","setSearchText","display","mapDispatchToProps","dispatch","setProductsSearchText","mapStateToProps","eCommerceApp","fuse","ownProps","products","settings"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { FuseAnimate } from '@fuse';\nimport { connect } from 'react-redux';\nimport { bindActionCreators } from 'redux';\nimport * as Actions from '../store/actions';\nimport { withRouter } from 'react-router-dom';\nimport { Paper, Input, Icon, Typography, MuiThemeProvider, Button } from '@material-ui/core';\n\nimport superagent from 'superagent';\nimport {SongMediaList} from './SongList';\n\nimport { FileInput, SVGIcon } from 'react-md';\nimport history from 'history.js';\n\nimport * as jwt_decode from \"jwt-decode\";\n\n\n//----------get user data----------\nvar token = localStorage.getItem('token');\nvar decoded = [];\n\n//----------Api config ---------\nconst api_host = \"http://localhost:8080\";\n\nlet headers = new Headers();\n\nheaders.append('Access-Control-Allow-Origin', 'http://localhost:8080');\nheaders.append('Access-Control-Allow-Credentials', 'true');\nheaders.append('Content-Type', 'application/json');\nheaders.append('authorization', 'Bearer ' + token);\n\nclass SongHeader extends Component {\n    state = {\n        selectedFile: null,\n    };\n\n    uploadMedia = (e) => {\n        console.log(e.target)\n    };\n  \n    fileSelectHandler = (event) => {\n      // this.setState({ selectedFile: event.target.files[0] });\n      var selectedFile = event.target.files[0];\n      var path = 'public/uploads/media/' + selectedFile.name;\n      const {sid} = this.props.match.params;\n\n      const data = {\n          'file': selectedFile,\n          'name': selectedFile.name,\n          'path': path,\n          'sid' : sid,\n      }\n\n      let uploadRequest = superagent.post(api_host + '/media')\n      .set('authorization', 'Bearer ' + token)\n      .field(data);\n      \n      uploadRequest.attach('image', selectedFile);\n      uploadRequest.end((err, res) => {\n        if (err) {\n          alert(res.body.message);\n          return;\n        }    \n        console.log(res);\n        window.location.reload();\n        // this.props.readMedia(sid);\n      });\n    };\n\n    render(){\n        return (\n            <div className=\"flex flex-1 w-full items-center justify-between\">\n              <div className=\"flex items-center\">\n                <FuseAnimate animation=\"transition.slideLeftIn\" delay={300}>\n                  <Typography className=\"hidden sm:flex\" variant=\"h6\">\n                    LIST OF SONG MEDIA {}\n                  </Typography>\n                </FuseAnimate>\n              </div>\n        \n              <div className=\"flex flex-1 items-center justify-center px-12\">\n                <MuiThemeProvider theme={this.props.mainTheme}>\n                  <FuseAnimate animation=\"transition.slideDownIn\" delay={300}>\n                    <Paper className=\"flex items-center w-full max-w-512 px-8 py-4 rounded-8\" elevation={1}>\n                      <Icon className=\"mr-8\" color=\"action\">\n                        search\n                      </Icon>\n        \n                      <Input\n                        placeholder=\"Search\"\n                        className=\"flex flex-1\"\n                        disableUnderline\n                        fullWidth\n                        value={this.props.searchText}\n                        inputProps={{\n                          'aria-label': 'Search'\n                        }}\n                        onChange={this.props.setSearchText}\n                      />\n                    </Paper>\n        \n                  </FuseAnimate>\n                </MuiThemeProvider>\n              </div>\n              \n              {/* <Input id=\"my-input\" aria-describedby=\"my-helper-text\" type=\"file\" style={{display: 'none'}}\n                onChange={this.fileSelectHandler} ref={fileInput => this.fileInput = fileInput}/>\n              <Button onClick={()=> this.fileInput.click()} variant=\"contained\" color=\"secondary\" aria-label=\"Follow\">\n                Pick File\n              </Button> */}\n              <input\n                accept=\"image/*\"\n                style={{ display: 'none' }}\n                id=\"raised-button-file\"\n                multiple\n                type=\"file\"\n                onChange={this.fileSelectHandler}\n                />\n                <label htmlFor=\"raised-button-file\">\n                    <Button variant=\"contained\" component=\"span\" onClick={this.uploadMedia} color=\"secondary\" aria-label=\"Follow\">\n                        Upload New Media\n                    </Button>\n                </label>\n            </div>\n        );\n    }\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n    return bindActionCreators(\n        {\n            setSearchText: Actions.setProductsSearchText\n        },\n        dispatch\n    );\n}\n  \nfunction mapStateToProps({ eCommerceApp, fuse, ownProps }) {\n    return {\n        searchText: eCommerceApp.products.searchText,\n        mainTheme: fuse.settings.mainTheme,\n    };\n}\n\nexport default withRouter(\n    connect(\n        mapStateToProps,\n        mapDispatchToProps\n    )(SongHeader)\n);"]},"metadata":{},"sourceType":"module"}