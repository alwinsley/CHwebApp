{"ast":null,"code":"import _classCallCheck from \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/src/app/main/pages/songs/mediaList/SongList.js\";\nimport _ from '@lodash';\nimport React, { Component } from 'react';\nimport { FusePageCarded } from '@fuse';\nimport withReducer from 'app/store/withReducer';\nimport SongTable from './SongTable';\nimport SongHeader from './SongHeader';\nimport reducer from '../store/reducers';\nimport * as jwt_decode from \"jwt-decode\";\nimport history from 'history.js'; //----------get user data----------\n\nvar token = localStorage.getItem('token');\nvar decoded = []; //----------Api config ---------\n\nvar api_host = \"http://localhost:8080\";\nvar headers = new Headers();\nheaders.append('Access-Control-Allow-Origin', 'http://localhost:8080');\nheaders.append('Access-Control-Allow-Credentials', 'true');\nheaders.append('Content-Type', 'application/json');\nheaders.append('authorization', 'Bearer ' + token);\n\nvar SongMediaList =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SongMediaList, _Component);\n\n  function SongMediaList() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SongMediaList);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SongMediaList)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      song_id: 0,\n      media: [],\n      song_name: ''\n    };\n    return _this;\n  }\n\n  _createClass(SongMediaList, [{\n    key: \"readMedia\",\n    value: function readMedia(id) {\n      var _this2 = this;\n\n      var media = [];\n      fetch(api_host + '/song/getMediaByID/' + id, {\n        method: 'GET',\n        headers: headers\n      }).then(function (response) {\n        response.json().then(function (data) {\n          console.log(data);\n\n          if (data.data.length != 0) {\n            data.data.forEach(function (singleMedia) {\n              media.push({\n                id: singleMedia.id,\n                name: singleMedia.name,\n                description: singleMedia.description\n              });\n            });\n\n            _this2.setState({\n              media: media\n            });\n          }\n\n          console.log(_this2.state);\n        });\n      });\n    }\n  }, {\n    key: \"readSong\",\n    value: function readSong(id) {\n      var _this3 = this;\n\n      this.setState({\n        song_name: ''\n      });\n      fetch(api_host + '/song/getByID/' + id, {\n        method: 'GET',\n        headers: headers\n      }).then(function (response) {\n        response.json().then(function (data) {\n          console.log(data);\n\n          if (data.length > 0) {\n            _this3.setState({\n              song_name: data[0].name\n            });\n          }\n        });\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var sid = this.props.match.params.sid;\n      this.setState({\n        song_id: sid\n      });\n\n      if (token != null && token != \"\") {\n        decoded = jwt_decode(token);\n        this.readMedia(sid);\n        this.readSong(sid);\n      } else {\n        history.push('/login');\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          media = _this$state.media,\n          song_name = _this$state.song_name;\n      console.log(this.state);\n      return React.createElement(FusePageCarded, {\n        classes: {\n          content: 'flex',\n          header: 'min-h-72 h-72 sm:h-136 sm:min-h-136',\n          toolbar: 'px-16 sm:px-24'\n        },\n        header: React.createElement(SongHeader, {\n          readMedia: this.readMedia,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }),\n        content: React.createElement(SongTable, {\n          media: media,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }),\n        innerScroll: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100\n        },\n        __self: this\n      });\n    }\n  }]);\n\n  return SongMediaList;\n}(Component);\n\nexport default withReducer('eCommerceApp', reducer)(SongMediaList);","map":{"version":3,"sources":["/Users/ALJohnny/Desktop/Git/ReactCHLayout/src/app/main/pages/songs/mediaList/SongList.js"],"names":["_","React","Component","FusePageCarded","withReducer","SongTable","SongHeader","reducer","jwt_decode","history","token","localStorage","getItem","decoded","api_host","headers","Headers","append","SongMediaList","state","song_id","media","song_name","id","fetch","method","then","response","json","data","console","log","length","forEach","singleMedia","push","name","description","setState","sid","props","match","params","readMedia","readSong","content","header","toolbar"],"mappings":"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","sourcesContent":["import _ from '@lodash';\nimport React, { Component } from 'react';\nimport { FusePageCarded } from '@fuse';\nimport withReducer from 'app/store/withReducer';\nimport SongTable from './SongTable';\nimport SongHeader from './SongHeader';\nimport reducer from '../store/reducers';\nimport * as jwt_decode from \"jwt-decode\";\nimport history from 'history.js';\n\n\n//----------get user data----------\nvar token = localStorage.getItem('token');\nvar decoded = [];\n\n//----------Api config ---------\nconst api_host = \"http://localhost:8080\";\n\nlet headers = new Headers();\n\nheaders.append('Access-Control-Allow-Origin', 'http://localhost:8080');\nheaders.append('Access-Control-Allow-Credentials', 'true');\nheaders.append('Content-Type', 'application/json');\nheaders.append('authorization', 'Bearer ' + token);\n\n\nclass SongMediaList extends Component {\n    state = {\n        song_id: 0,\n        media: [],\n        song_name: ''\n    };\n\n    readMedia(id){       \n        const media = [];     \n\n        fetch(api_host + '/song/getMediaByID/'  + id , {\n            method: 'GET',\n            headers: headers,\n        })\n        .then(response => {\n            response.json().then(data => {\n                console.log(data);\n                if(data.data.length != 0){\n                    data.data.forEach(singleMedia => {\n                      media.push({\n                        id: singleMedia.id,\n                        name: singleMedia.name,\n                        description: singleMedia.description,\n                      });\n                    });\n                    this.setState({\n                        media: media,\n                    });\n                }\n                console.log(this.state);\n            });\n        });\n    }\n\n    readSong(id){\n        this.setState({ \n            song_name: '',\n        });\n    \n        fetch(api_host + '/song/getByID/'  + id , {\n          method: 'GET',\n          headers: headers,\n        })\n        .then(response => {\n          response.json().then(data => {\n            console.log(data);\n            if(data.length >0){\n              this.setState({\n                  song_name: data[0].name,\n              });\n            }\n          });\n        });\n    }\n\n    componentDidMount(){\n        const { sid } = this.props.match.params;\n        this.setState({ song_id: sid });\n        \n        if(token != null && token != \"\"){\n          decoded = jwt_decode(token);\n          this.readMedia(sid);\n          this.readSong(sid);\n        }else{\n          history.push('/login');\n        }\n    }\n\n    render(){\n        const { media, song_name } = this.state;\n        console.log(this.state);\n \n        return(\n            <FusePageCarded\n            classes={{\n              content: 'flex',\n              header: 'min-h-72 h-72 sm:h-136 sm:min-h-136',\n              toolbar: 'px-16 sm:px-24'\n            }}\n            header={<SongHeader readMedia={this.readMedia}/>}            \n            content={<SongTable media={media}/>}\n            innerScroll\n            />\n        );\n    }\n}\n\nexport default withReducer('eCommerceApp', reducer)(SongMediaList);"]},"metadata":{},"sourceType":"module"}