{"ast":null,"code":"import _classCallCheck from \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/ALJohnny/Desktop/Git/ReactCHLayout/src/app/main/pages/songs/mediaList/SongTable.js\";\nimport _ from '@lodash';\nimport { FuseScrollbars } from '@fuse';\nimport React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { withRouter } from 'react-router-dom';\nimport SongTableHead from './SongTableHead';\nimport * as Actions from '../store/actions';\nimport connect from 'react-redux/es/connect/connect';\nimport { Table, TableBody, TableCell, TablePagination, TableRow, Button } from '@material-ui/core';\nimport * as jwt_decode from \"jwt-decode\";\nimport history from 'history.js'; //----------get user data----------\n\nvar token = localStorage.getItem('token');\nvar decoded = []; //----------Api config ---------\n\nvar api_host = \"http://localhost:8080\";\nvar headers = new Headers();\nheaders.append('Access-Control-Allow-Origin', 'http://localhost:8080');\nheaders.append('Access-Control-Allow-Credentials', 'true');\nheaders.append('Content-Type', 'application/json');\nheaders.append('authorization', 'Bearer ' + token);\n\nvar SongTable =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SongTable, _Component);\n\n  function SongTable() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, SongTable);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(SongTable)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      order: 'asc',\n      orderBy: null,\n      selected: [],\n      data: _this.props.media,\n      page: 0,\n      rowsPerPage: 10,\n      song_id: 0,\n      media_id: 0\n    };\n\n    _this.getFilteredArray = function (data, searchText) {\n      if (searchText.length === 0) {\n        return data;\n      }\n\n      return _.filter(data, function (item) {\n        return item.name.toLowerCase().includes(searchText.toLowerCase());\n      });\n    };\n\n    _this.handleRequestSort = function (event, property) {\n      var orderBy = property;\n      var order = 'desc';\n\n      if (_this.state.orderBy === property && _this.state.order === 'desc') {\n        order = 'asc';\n      }\n\n      _this.setState({\n        order: order,\n        orderBy: orderBy\n      });\n    };\n\n    _this.handleSelectAllClick = function (event) {\n      if (event.target.checked) {\n        _this.setState(function (state) {\n          return {\n            selected: _this.state.data.map(function (n) {\n              return n.id;\n            })\n          };\n        });\n\n        return;\n      }\n\n      _this.setState({\n        selected: []\n      });\n    };\n\n    _this.handleClick = function (event, media_id) {\n      _this.props.history.push('/songs/' + _this.state.song_id + '/media/' + media_id);\n    };\n\n    _this.handleCheck = function (event, id) {\n      var selected = _this.state.selected;\n      var selectedIndex = selected.indexOf(id);\n      var newSelected = [];\n\n      if (selectedIndex === -1) {\n        newSelected = newSelected.concat(selected, id);\n      } else if (selectedIndex === 0) {\n        newSelected = newSelected.concat(selected.slice(1));\n      } else if (selectedIndex === selected.length - 1) {\n        newSelected = newSelected.concat(selected.slice(0, -1));\n      } else if (selectedIndex > 0) {\n        newSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\n      }\n\n      _this.setState({\n        selected: newSelected\n      });\n    };\n\n    _this.handleChangePage = function (event, page) {\n      _this.setState({\n        page: page\n      });\n    };\n\n    _this.handleChangeRowsPerPage = function (event) {\n      _this.setState({\n        rowsPerPage: event.target.value\n      });\n    };\n\n    _this.isSelected = function (id) {\n      return _this.state.selected.indexOf(id) !== -1;\n    };\n\n    return _this;\n  }\n\n  _createClass(SongTable, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _this$props$match$par = this.props.match.params,\n          sid = _this$props$match$par.sid,\n          mid = _this$props$match$par.mid;\n      this.setState({\n        song_id: sid,\n        media_id: mid\n      });\n\n      if (token != null && token != \"\") {\n        decoded = jwt_decode(token);\n        console.log(nextProps);\n        this.setState({\n          data: nextProps.media\n        });\n      } else {\n        history.push('/login');\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      if (!_.isEqual(this.props.products, prevProps.products) || !_.isEqual(this.props.searchText, prevProps.searchText)) {\n        var data = this.getFilteredArray(this.props.media, this.props.searchText);\n        this.setState({\n          data: data\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var _this$state = this.state,\n          order = _this$state.order,\n          orderBy = _this$state.orderBy,\n          selected = _this$state.selected,\n          rowsPerPage = _this$state.rowsPerPage,\n          page = _this$state.page,\n          data = _this$state.data,\n          song_id = _this$state.song_id,\n          media_id = _this$state.media_id;\n      return React.createElement(\"div\", {\n        className: \"w-full flex flex-col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132\n        },\n        __self: this\n      }, React.createElement(FuseScrollbars, {\n        className: \"flex-grow overflow-x-auto\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(Table, {\n        className: \"min-w-xl\",\n        \"aria-labelledby\": \"tableTitle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, React.createElement(SongTableHead, {\n        numSelected: selected.length,\n        order: order,\n        orderBy: orderBy,\n        onSelectAllClick: this.handleSelectAllClick,\n        onRequestSort: this.handleRequestSort,\n        rowCount: data.length,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135\n        },\n        __self: this\n      }), React.createElement(TableBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144\n        },\n        __self: this\n      }, _.orderBy(data, [function (o) {\n        switch (orderBy) {\n          case 'categories':\n            {\n              return o.categories[0];\n            }\n\n          default:\n            {\n              return o[orderBy];\n            }\n        }\n      }], [order]).slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage).map(function (n) {\n        var isSelected = _this2.isSelected(n.id);\n\n        return React.createElement(TableRow, {\n          className: \"h-64 cursor-pointer\",\n          hover: true,\n          role: \"checkbox\",\n          \"aria-checked\": isSelected,\n          tabIndex: -1,\n          key: n.id,\n          selected: isSelected,\n          onClick: function onClick(e) {\n            return _this2.handleClick(e, n.id);\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 165\n          },\n          __self: this\n        }, React.createElement(TableCell, {\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175\n          },\n          __self: this\n        }, n.name), React.createElement(TableCell, {\n          className: \"truncate\",\n          component: \"th\",\n          scope: \"row\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179\n          },\n          __self: this\n        }, React.createElement(Button, {\n          variant: \"contained\",\n          color: \"secondary\",\n          \"aria-label\": \"Follow\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180\n          },\n          __self: this\n        }, \"View\")));\n      })))), React.createElement(TablePagination, {\n        component: \"div\",\n        count: data.length,\n        rowsPerPage: rowsPerPage,\n        page: page,\n        backIconButtonProps: {\n          'aria-label': 'Previous Page'\n        },\n        nextIconButtonProps: {\n          'aria-label': 'Next Page'\n        },\n        onChangePage: this.handleChangePage,\n        onChangeRowsPerPage: this.handleChangeRowsPerPage,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return SongTable;\n}(Component);\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    getProducts: Actions.getProducts\n  }, dispatch);\n}\n\nfunction mapStateToProps(_ref) {\n  var eCommerceApp = _ref.eCommerceApp;\n  return {\n    products: eCommerceApp.products.data,\n    searchText: eCommerceApp.products.searchText\n  };\n}\n\nexport default withRouter(connect(mapStateToProps, mapDispatchToProps)(SongTable));","map":{"version":3,"sources":["/Users/ALJohnny/Desktop/Git/ReactCHLayout/src/app/main/pages/songs/mediaList/SongTable.js"],"names":["_","FuseScrollbars","React","Component","bindActionCreators","withRouter","SongTableHead","Actions","connect","Table","TableBody","TableCell","TablePagination","TableRow","Button","jwt_decode","history","token","localStorage","getItem","decoded","api_host","headers","Headers","append","SongTable","state","order","orderBy","selected","data","props","media","page","rowsPerPage","song_id","media_id","getFilteredArray","searchText","length","filter","item","name","toLowerCase","includes","handleRequestSort","event","property","setState","handleSelectAllClick","target","checked","map","n","id","handleClick","push","handleCheck","selectedIndex","indexOf","newSelected","concat","slice","handleChangePage","handleChangeRowsPerPage","value","isSelected","nextProps","match","params","sid","mid","console","log","prevProps","prevState","isEqual","products","o","categories","e","mapDispatchToProps","dispatch","getProducts","mapStateToProps","eCommerceApp"],"mappings":"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","sourcesContent":["import _ from '@lodash';\nimport { FuseScrollbars } from '@fuse';\nimport React, { Component } from 'react';\nimport { bindActionCreators } from 'redux';\nimport { withRouter } from 'react-router-dom';\nimport SongTableHead from './SongTableHead';\nimport * as Actions from '../store/actions';\nimport connect from 'react-redux/es/connect/connect';\nimport { Table, TableBody, TableCell, TablePagination, TableRow, Button } from '@material-ui/core';\nimport * as jwt_decode from \"jwt-decode\";\nimport history from 'history.js';\n\n\n//----------get user data----------\nvar token = localStorage.getItem('token');\nvar decoded = [];\n\n//----------Api config ---------\nconst api_host = \"http://localhost:8080\";\n\nlet headers = new Headers();\n\nheaders.append('Access-Control-Allow-Origin', 'http://localhost:8080');\nheaders.append('Access-Control-Allow-Credentials', 'true');\nheaders.append('Content-Type', 'application/json');\nheaders.append('authorization', 'Bearer ' + token);\n\n\nclass SongTable extends Component {\n  state = {\n    order: 'asc',\n    orderBy: null,\n    selected: [],\n    data: this.props.media,\n    page: 0,\n    rowsPerPage: 10,\n    song_id: 0,\n    media_id: 0,\n  };\n\n  componentWillReceiveProps(nextProps) {\n    const { sid, mid } = this.props.match.params\n    this.setState({\n      song_id: sid,\n      media_id: mid,\n    });\n\n    if (token != null && token != \"\") {\n      decoded = jwt_decode(token);\n      console.log(nextProps);\n      this.setState({ data: nextProps.media });\n    } else {\n      history.push('/login');\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    if (\n      !_.isEqual(this.props.products, prevProps.products) ||\n      !_.isEqual(this.props.searchText, prevProps.searchText)\n    ) {\n      const data = this.getFilteredArray(this.props.media, this.props.searchText);\n      this.setState({ data });\n    }\n  }\n\n  getFilteredArray = (data, searchText) => {\n    if (searchText.length === 0) {\n      return data;\n    }\n    return _.filter(data, item => item.name.toLowerCase().includes(searchText.toLowerCase()));\n  };\n\n  handleRequestSort = (event, property) => {\n    const orderBy = property;\n    let order = 'desc';\n\n    if (this.state.orderBy === property && this.state.order === 'desc') {\n      order = 'asc';\n    }\n\n    this.setState({\n      order,\n      orderBy\n    });\n  };\n\n  handleSelectAllClick = event => {\n    if (event.target.checked) {\n      this.setState(state => ({ selected: this.state.data.map(n => n.id) }));\n      return;\n    }\n    this.setState({ selected: [] });\n  };\n\n  handleClick = (event, media_id) => {\n    this.props.history.push('/songs/' + this.state.song_id + '/media/' + media_id);\n  };\n\n  handleCheck = (event, id) => {\n    const { selected } = this.state;\n    const selectedIndex = selected.indexOf(id);\n    let newSelected = [];\n\n    if (selectedIndex === -1) {\n      newSelected = newSelected.concat(selected, id);\n    } else if (selectedIndex === 0) {\n      newSelected = newSelected.concat(selected.slice(1));\n    } else if (selectedIndex === selected.length - 1) {\n      newSelected = newSelected.concat(selected.slice(0, -1));\n    } else if (selectedIndex > 0) {\n      newSelected = newSelected.concat(selected.slice(0, selectedIndex), selected.slice(selectedIndex + 1));\n    }\n\n    this.setState({ selected: newSelected });\n  };\n\n  handleChangePage = (event, page) => {\n    this.setState({ page });\n  };\n\n  handleChangeRowsPerPage = event => {\n    this.setState({ rowsPerPage: event.target.value });\n  };\n\n  isSelected = id => this.state.selected.indexOf(id) !== -1;\n\n  render() {\n    const { order, orderBy, selected, rowsPerPage, page, data, song_id, media_id } = this.state;\n\n    return (\n      <div className=\"w-full flex flex-col\">\n        <FuseScrollbars className=\"flex-grow overflow-x-auto\">\n          <Table className=\"min-w-xl\" aria-labelledby=\"tableTitle\">\n            <SongTableHead\n              numSelected={selected.length}\n              order={order}\n              orderBy={orderBy}\n              onSelectAllClick={this.handleSelectAllClick}\n              onRequestSort={this.handleRequestSort}\n              rowCount={data.length}\n            />\n\n            <TableBody>\n              {_.orderBy(\n                data,\n                [\n                  o => {\n                    switch (orderBy) {\n                      case 'categories': {\n                        return o.categories[0];\n                      }\n                      default: {\n                        return o[orderBy];\n                      }\n                    }\n                  }\n                ],\n                [order]\n              )\n                .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                .map(n => {\n                  const isSelected = this.isSelected(n.id);\n                  return (\n                    <TableRow\n                      className=\"h-64 cursor-pointer\"\n                      hover\n                      role=\"checkbox\"\n                      aria-checked={isSelected}\n                      tabIndex={-1}\n                      key={n.id}\n                      selected={isSelected}\n                      onClick={(e) => this.handleClick(e, n.id)}\n                    >\n                      <TableCell component=\"th\" scope=\"row\">\n                        {n.name}\n                      </TableCell>\n\n                      <TableCell className=\"truncate\" component=\"th\" scope=\"row\">\n                        <Button variant=\"contained\" color=\"secondary\" aria-label=\"Follow\">\n                          View\n                        </Button>\n                      </TableCell>\n                    </TableRow>\n                  );\n                })}\n            </TableBody>\n          </Table>\n        </FuseScrollbars>\n\n        <TablePagination\n          component=\"div\"\n          count={data.length}\n          rowsPerPage={rowsPerPage}\n          page={page}\n          backIconButtonProps={{\n            'aria-label': 'Previous Page'\n          }}\n          nextIconButtonProps={{\n            'aria-label': 'Next Page'\n          }}\n          onChangePage={this.handleChangePage}\n          onChangeRowsPerPage={this.handleChangeRowsPerPage}\n        />\n      </div>\n    );\n  }\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators(\n    {\n      getProducts: Actions.getProducts\n    },\n    dispatch\n  );\n}\n\nfunction mapStateToProps({ eCommerceApp }) {\n  return {\n    products: eCommerceApp.products.data,\n    searchText: eCommerceApp.products.searchText\n  };\n}\n\nexport default withRouter(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(SongTable)\n);\n"]},"metadata":{},"sourceType":"module"}